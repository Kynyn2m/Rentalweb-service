<h2 mat-dialog-title>Update Room</h2>
<mat-dialog-content class="update-room-dialog-content">
  <!-- Title Input -->
  <mat-form-field class="full-width">
    <mat-label>Title</mat-label>
    <input matInput [(ngModel)]="roomData.title" required />
  </mat-form-field>

  <!-- Two-column layout for Price and Width -->
  <div class="two-column">
    <!-- Price Input -->
    <mat-form-field>
      <mat-label>Price</mat-label>
      <input matInput type="number" [(ngModel)]="roomData.price" required />
    </mat-form-field>

    <!-- Width Input -->
    <mat-form-field>
      <mat-label>Width</mat-label>
      <input matInput type="number" [(ngModel)]="roomData.width" />
    </mat-form-field>
  </div>

  <!-- Two-column layout for Height and Floor -->
  <div class="two-column">
    <!-- Height Input -->
    <mat-form-field>
      <mat-label>Height</mat-label>
      <input matInput type="number" [(ngModel)]="roomData.height" />
    </mat-form-field>

    <!-- Floor Input -->
    <mat-form-field>
      <mat-label>Floor</mat-label>
      <input matInput type="number" [(ngModel)]="roomData.floor" />
    </mat-form-field>
  </div>

  <!-- Description Input -->
  <mat-form-field class="full-width">
    <mat-label>Description</mat-label>
    <textarea matInput [(ngModel)]="roomData.description" rows="3"></textarea>
  </mat-form-field>

  <!-- Two-column layout for Province, District -->
  <div class="two-column">
    <!-- Province Selector -->
    <mat-form-field class="full-width">
      <mat-label>Province</mat-label>
      <mat-select
        [(ngModel)]="roomData.provinceId"
        (selectionChange)="onProvinceSelected($event.value)"
      >
        <mat-option *ngFor="let province of provinces" [value]="province.id">
          {{ province.khmerName }} / {{ province.englishName }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <!-- District Selector -->
    <mat-form-field class="full-width">
      <mat-label>District</mat-label>
      <mat-select
        [(ngModel)]="roomData.districtId"
        (selectionChange)="onDistrictSelected($event.value)"
      >
        <mat-option *ngFor="let district of districts" [value]="district.id">
          {{ district.khmerName }} / {{ district.englishName }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <!-- Two-column layout for Commune, Village -->
  <div class="two-column">
    <!-- Commune Selector -->
    <mat-form-field class="full-width">
      <mat-label>Commune</mat-label>
      <mat-select
        [(ngModel)]="roomData.communeId"
        (selectionChange)="onCommuneSelected($event.value)"
      >
        <mat-option *ngFor="let commune of communes" [value]="commune.id">
          {{ commune.khmerName }} / {{ commune.englishName }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <!-- Village Selector -->
    <mat-form-field class="full-width">
      <mat-label>Village</mat-label>
      <mat-select [(ngModel)]="roomData.villageId">
        <mat-option *ngFor="let village of villages" [value]="village.id">
          {{ village.khmerName }} / {{ village.englishName }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <!-- Phone Number Input -->
  <mat-form-field class="full-width">
    <mat-label>Phone Number</mat-label>
    <input matInput type="tel" [(ngModel)]="roomData.phoneNumber" required />
  </mat-form-field>

  <!-- Map Link Input -->
  <mat-form-field class="full-width">
    <mat-label>Map Link</mat-label>
    <input matInput [(ngModel)]="roomData.linkMap" />
  </mat-form-field>

  <!-- Image Upload -->
  <div class="full-width">
    <label for="fileInput" class="file-label">Upload Image</label>
    <input id="fileInput" type="file" (change)="onFileSelected($event)" />
  </div>

  <!-- Display loaded images -->
  <div *ngIf="roomData.safeImagePaths && roomData.safeImagePaths.length > 0">
    <img
      *ngFor="let imgPath of roomData.safeImagePaths"
      [src]="imgPath"
      alt="Room Image"
    />
    <button mat-button (click)="cancelImage()">Cancel Image</button>
  </div>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button (click)="cancel()">Cancel</button>
  <button mat-raised-button color="primary" (click)="save()">Save</button>
</mat-dialog-actions>
