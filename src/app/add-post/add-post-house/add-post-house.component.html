<div class="back-button-container">
  <button mat-button
          color="primary"
          (click)="goBack()"
          class="back-button">
    <mat-icon>arrow_back</mat-icon>
    Back
  </button>
</div>
<div class="form-container"
     fxLayout="column"
     fxLayoutAlign="center center">
  <div class="form-header">
    <h2 class="form-title">Add House Post</h2>
  </div>
  <form [formGroup]="addPostForm"
        (ngSubmit)="onSubmit()"
        class="add-post-form"
        fxLayout="column"
        fxLayoutGap="16px">
    <mat-form-field appearance="outline"
                    fxFlex="100%">
      <mat-label>Title</mat-label>
      <input matInput
             formControlName="title"
             placeholder="Enter title" />
      <mat-error *ngIf="addPostForm.get('title')?.invalid && addPostForm.get('title')?.touched">
        Title is required
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline"
                    fxFlex="100%">
      <mat-label>Description</mat-label>
      <textarea matInput
                formControlName="description"
                placeholder="Enter description"></textarea>
      <mat-error *ngIf="addPostForm.get('description')?.invalid && addPostForm.get('description')?.touched">
        Description is required
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline"
                    fxFlex="100%">
      <mat-label>Location</mat-label>
      <input matInput
             formControlName="location"
             placeholder="Enter location" />
      <mat-error *ngIf="addPostForm.get('location')?.invalid && addPostForm.get('location')?.touched">
        Location is required
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline"
                    fxFlex="100%">
      <mat-label>Price</mat-label>
      <input matInput
             formControlName="price"
             type="number"
             placeholder="Enter price" />
      <mat-error *ngIf="addPostForm.get('price')?.invalid && addPostForm.get('price')?.touched">
        Price is required
      </mat-error>
    </mat-form-field>
    <mat-form-field appearance="outline"
                    fxFlex="100%">
      <mat-label>Phone Number</mat-label>
      <input matInput
             formControlName="phoneNumber"
             type="text"
             placeholder="Enter phone number" />
      <mat-error *ngIf="addPostForm.get('phoneNumber')?.invalid && addPostForm.get('phoneNumber')?.touched">
        Phone number is required
      </mat-error>
    </mat-form-field>
    <mat-form-field appearance="outline"
                    fxFlex="100%">
      <mat-label>Link Map</mat-label>
      <input matInput
             formControlName="linkMap"
             placeholder="Enter map link" />
      <mat-error *ngIf="addPostForm.get('linkMap')?.invalid && addPostForm.get('linkMap')?.touched">
        Map link is required
      </mat-error>
    </mat-form-field>

    <!-- Floor, Width, and Height -->
    <div fxLayout="row wrap"
         fxLayoutGap="16px">
      <mat-form-field appearance="outline"
                      fxFlex="100%"
                      fxFlex.gt-sm="48%">
        <mat-label>Floor</mat-label>
        <input matInput
               formControlName="floor"
               type="number"
               placeholder="Enter floor number" />
        <mat-error *ngIf="addPostForm.get('floor')?.invalid && addPostForm.get('floor')?.touched">
          Floor is required
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline"
                      fxFlex="100%"
                      fxFlex.gt-sm="48%">
        <mat-label>Width</mat-label>
        <input matInput
               formControlName="width"
               type="number"
               placeholder="Enter width" />
        <mat-error *ngIf="addPostForm.get('width')?.invalid && addPostForm.get('width')?.touched">
          Width is required
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline"
                      fxFlex="100%"
                      fxFlex.gt-sm="48%">
        <mat-label>Height</mat-label>
        <input matInput
               formControlName="height"
               type="number"
               placeholder="Enter height" />
        <mat-error *ngIf="addPostForm.get('height')?.invalid && addPostForm.get('height')?.touched">
          Height is required
        </mat-error>
      </mat-form-field>
    </div>
    <!-- Image Upload -->
    <div class="file-input-container">
      <label for="file-upload"
             class="file-upload-label">Upload Images</label>
      <input id="file-upload"
             type="file"
             (change)="onFileSelected($event)"
             multiple />
      <mat-error *ngIf="imageError">{{ imageError }}</mat-error>
    </div>
    <div class="image-preview-container"
         *ngIf="imagePreviews.length > 0">
      <div *ngFor="let image of imagePreviews; let i = index"
           class="image-preview">
        <img [src]="image"
             alt="Image Preview" />
        <button class="custom-cancel-button"
                (click)="removeImage(i)">
          &#10005;
        </button>
      </div>
    </div>
    <button mat-raised-button
            color="primary"
            type="submit"
            [disabled]="addPostForm.invalid">
      Submit
    </button>
  </form>
</div>

<app-footer></app-footer>