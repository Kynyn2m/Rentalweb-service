<div class="back-button-container">
  <button mat-button color="primary" (click)="goBack()" class="back-button">
    <mat-icon>arrow_back</mat-icon>
    Back
  </button>
</div>

<mat-card class="form-card">
  <div class="form-header">
    <h2 class="form-title">Add Land Post</h2>
  </div>

  <form
    [formGroup]="addPostForm"
    (ngSubmit)="onSubmit()"
    class="add-post-form"
    fxLayout="column"
    fxLayoutGap="16px"
  >
    <!-- Title -->
    <mat-form-field appearance="outline" fxFlex="100%">
      <mat-label>Title</mat-label>
      <input matInput formControlName="title" placeholder="Enter title" />
      <mat-error
        *ngIf="
          addPostForm.get('title')?.invalid && addPostForm.get('title')?.touched
        "
      >
        Title is required
      </mat-error>
    </mat-form-field>

    <!-- Description -->
    <mat-form-field appearance="outline" fxFlex="100%">
      <mat-label>Description</mat-label>
      <textarea
        matInput
        formControlName="description"
        placeholder="Enter description"
      ></textarea>
      <mat-error
        *ngIf="
          addPostForm.get('description')?.invalid &&
          addPostForm.get('description')?.touched
        "
      >
        Description is required
      </mat-error>
    </mat-form-field>

    <!-- Grid for Location, Price, Phone Number, and Map Link -->
    <div class="form-grid">
      <mat-form-field appearance="outline">
        <mat-label>Location</mat-label>
        <input
          matInput
          formControlName="location"
          placeholder="Enter location"
        />
        <mat-error
          *ngIf="
            addPostForm.get('location')?.invalid &&
            addPostForm.get('location')?.touched
          "
        >
          Location is required
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Price</mat-label>
        <input
          matInput
          formControlName="price"
          type="number"
          placeholder="Enter price"
        />
        <mat-error
          *ngIf="
            addPostForm.get('price')?.invalid &&
            addPostForm.get('price')?.touched
          "
        >
          Price is required
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Phone Number</mat-label>
        <input
          matInput
          formControlName="phoneNumber"
          type="text"
          placeholder="Enter phone number"
        />
        <mat-error
          *ngIf="
            addPostForm.get('phoneNumber')?.invalid &&
            addPostForm.get('phoneNumber')?.touched
          "
        >
          Phone number is required
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Link Map</mat-label>
        <input
          matInput
          formControlName="linkMap"
          placeholder="Enter map link"
        />
        <mat-error
          *ngIf="
            addPostForm.get('linkMap')?.invalid &&
            addPostForm.get('linkMap')?.touched
          "
        >
          Map link is required
        </mat-error>
      </mat-form-field>
    </div>

    <!-- Land Size -->
    <mat-form-field appearance="outline" fxFlex="100%">
      <mat-label>Land Size</mat-label>
      <input matInput formControlName="landSize" type="number" />
      <mat-error
        *ngIf="
          addPostForm.get('landSize')?.invalid &&
          addPostForm.get('landSize')?.touched
        "
      >
        Land size is required
      </mat-error>
    </mat-form-field>

    <!-- Image Upload -->
    <div class="file-input-container">
      <label for="file-upload" class="file-upload-label">Upload Images</label>
      <input
        id="file-upload"
        type="file"
        (change)="onFileSelected($event)"
        multiple
      />
      <mat-error *ngIf="imageError">{{ imageError }}</mat-error>
    </div>

    <!-- Image Preview Section -->
    <div class="image-preview-container" *ngIf="imagePreviews.length > 0">
      <div
        *ngFor="let image of imagePreviews; let i = index"
        class="image-preview"
      >
        <img [src]="image" alt="Preview" />
        <button class="custom-cancel-button" (click)="removeImage(i)">
          &#10005;
        </button>
      </div>
    </div>

    <!-- Submit Button -->
    <button mat-raised-button color="primary" type="submit">Submit</button>
  </form>
</mat-card>

<app-footer></app-footer>
